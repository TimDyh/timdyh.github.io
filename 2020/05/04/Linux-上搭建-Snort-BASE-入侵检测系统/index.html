<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="配置实验环境由于本人电脑的存储空间不足，无法再承担安装一个虚拟机的开销，因此在阿里云上申请了一个云服务器进行本次实验。 服务器配置如下：  1 核 - 2GB 内存 - 40GB 系统盘 操作系统：Ubuntu 18.04">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux 上搭建 Snort+BASE 入侵检测系统">
<meta property="og:url" content="http://yoursite.com/2020/05/04/Linux-%E4%B8%8A%E6%90%AD%E5%BB%BA-Snort-BASE-%E5%85%A5%E4%BE%B5%E6%A3%80%E6%B5%8B%E7%B3%BB%E7%BB%9F/index.html">
<meta property="og:site_name" content="TimDyh">
<meta property="og:description" content="配置实验环境由于本人电脑的存储空间不足，无法再承担安装一个虚拟机的开销，因此在阿里云上申请了一个云服务器进行本次实验。 服务器配置如下：  1 核 - 2GB 内存 - 40GB 系统盘 操作系统：Ubuntu 18.04">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133010.jpg">
<meta property="og:image" content="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133011.jpg">
<meta property="og:image" content="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133012.jpg">
<meta property="og:image" content="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133013.jpg">
<meta property="og:image" content="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133014.jpg">
<meta property="og:image" content="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133015.jpg">
<meta property="og:image" content="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133016.jpg">
<meta property="og:image" content="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133017.jpg">
<meta property="og:image" content="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133018.jpg">
<meta property="og:image" content="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133020.jpg">
<meta property="og:image" content="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133021.jpg">
<meta property="og:image" content="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133022.jpg">
<meta property="og:image" content="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133024.jpg">
<meta property="og:image" content="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133025.jpg">
<meta property="og:image" content="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133027.jpg">
<meta property="og:image" content="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133030.jpg">
<meta property="og:image" content="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133032.jpg">
<meta property="og:image" content="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133033.jpg">
<meta property="og:image" content="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133034.jpg">
<meta property="og:image" content="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133035.jpg">
<meta property="og:image" content="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133037.jpg">
<meta property="article:published_time" content="2020-05-04T13:22:17.000Z">
<meta property="article:modified_time" content="2020-08-02T13:20:33.162Z">
<meta property="article:author" content="禹衡">
<meta property="article:tag" content="计算机网络">
<meta property="article:tag" content="Linux">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133010.jpg">

<link rel="canonical" href="http://yoursite.com/2020/05/04/Linux-%E4%B8%8A%E6%90%AD%E5%BB%BA-Snort-BASE-%E5%85%A5%E4%BE%B5%E6%A3%80%E6%B5%8B%E7%B3%BB%E7%BB%9F/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Linux 上搭建 Snort+BASE 入侵检测系统 | TimDyh</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?5a3f05cca5b5d8d38abfd03700d999f3";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">TimDyh</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/05/04/Linux-%E4%B8%8A%E6%90%AD%E5%BB%BA-Snort-BASE-%E5%85%A5%E4%BE%B5%E6%A3%80%E6%B5%8B%E7%B3%BB%E7%BB%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="禹衡">
      <meta itemprop="description" content="此生将无法被定义">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="TimDyh">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Linux 上搭建 Snort+BASE 入侵检测系统
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-05-04 21:22:17" itemprop="dateCreated datePublished" datetime="2020-05-04T21:22:17+08:00">2020-05-04</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span><br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>7k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>6 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="配置实验环境"><a href="#配置实验环境" class="headerlink" title="配置实验环境"></a>配置实验环境</h2><p>由于本人电脑的存储空间不足，无法再承担安装一个虚拟机的开销，因此在阿里云上申请了一个云服务器进行本次实验。</p>
<p>服务器配置如下：</p>
<ul>
<li>1 核 - 2GB 内存 - 40GB 系统盘</li>
<li>操作系统：Ubuntu 18.04</li>
</ul>
<a id="more"></a>

<p><img data-src="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133010.jpg" alt=""></p>
<h2 id="修改-Ubuntu-源"><a href="#修改-Ubuntu-源" class="headerlink" title="修改 Ubuntu 源"></a>修改 Ubuntu 源</h2><p>查看 /etc/apt/sources.list 发现已经配置好了阿里源，故不再做修改。如有需要，可自行改为阿里源或清华源，提高安装包下载速度。</p>
<p><img data-src="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133011.jpg" alt=""></p>
<h2 id="安装-Lamp"><a href="#安装-Lamp" class="headerlink" title="安装 Lamp"></a>安装 Lamp</h2><ol>
<li><p><strong>安装 Apache 2 Web 服务器</strong></p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install apache2 -y</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>安装 MySQL 数据库，并进行保护</strong></p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install mysql-server libmysqlclient-dev mysql-client autoconf libtool -y</span><br><span class="line">sudo mysql_secure_installation</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>安装 PHP 超文本预处理器</strong></p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:ondrej/php </span><br><span class="line">sudo apt-get update -y</span><br><span class="line">sudo apt-get install -y libapache2-mod-php5.6 php5.6 php5.6-common php5.6-gd php5.6-cli php5.6-xml php5.6-mysql</span><br><span class="line">sudo apt-get install -y php-pear libphp-adodb</span><br></pre></td></tr></table></figure>

<p> 执行第一句命令时报了 sudo: add-apt-repository: command not found 错误，查阅资料后得知需要先安装 software-properties-common（如下），然后再执行以上命令。</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install software-properties-common</span><br></pre></td></tr></table></figure>

<p> 最后，重新启动 Apache Web 服务器。</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart apache2</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>测试 PHP</strong></p>
<p> 在 /var/www/html 中创建一个名为 info.php 的新文件，写入如下内容，保存并退出。</p>
 <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">phpinfo();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p> 现在浏览 <a href="http://localhost/info.php" target="_blank" rel="noopener">http://localhost/info.php</a> ，可以看到 PHP 信息页面，说明 PHP 工作正常。</p>
<p> <img data-src="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133012.jpg" alt=""></p>
</li>
</ol>
<h2 id="安装-Snort"><a href="#安装-Snort" class="headerlink" title="安装 Snort"></a>安装 Snort</h2><ol>
<li><p><strong>安装 DAQ，解压编译</strong></p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tar -xvzf daq-2.0.6.tar.gz</span><br><span class="line">cd daq-2.0.6</span><br><span class="line">./configure </span><br><span class="line">sudo make &amp; make install</span><br></pre></td></tr></table></figure>

<p> 然而 ./configure 命令并没有成功生成 Makefile 文件，检查输出的信息发现如下错误：</p>
<p> <img data-src="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133013.jpg" alt=""></p>
<p> 意思是缺少一些依赖，于是先安装 flex 和 bison。</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install flex</span><br><span class="line">sudo apt-get install bison</span><br></pre></td></tr></table></figure>

<p> 再次执行 ./configure，又提示 libpcap 版本太低：</p>
<p> <img data-src="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133014.jpg" alt=""></p>
<p> 重新安装 libpcap。</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install libpcap-dev</span><br></pre></td></tr></table></figure>

<p> 此时再执行最开始的命令，DAQ 编译成功。</p>
</li>
<li><p><strong>安装 Snort，解压编译</strong></p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tar -xvzf snort-2.9.12.tar.gz</span><br><span class="line">cd snort-2.9.12</span><br><span class="line">./configure --enable-sourcefire</span><br><span class="line">sudo make &amp; make install</span><br></pre></td></tr></table></figure>

<p> 执行 ./configure 的过程中同样因为缺少一些依赖库而报错，需要安装 libpcre、dumbnet、luajit、libnghttp。</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install libpcre3-dev</span><br><span class="line">sudo apt-get install libdumbnet-dev</span><br><span class="line">sudo apt-get install liblua5.2-dev</span><br><span class="line">sudo apt-get install libnghttp2-dev</span><br></pre></td></tr></table></figure>

<p> 最后修复链接。</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ldconfig</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>测试 Snort 是否安装成功</strong></p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">snort -V</span><br></pre></td></tr></table></figure>

<p> <img data-src="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133015.jpg" alt=""></p>
</li>
<li><p><strong>配置用户和目录</strong></p>
<p> 创建用户和用户组：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo groupadd snort</span><br><span class="line">sudo useradd snort -r -s /sbin/nologin -c SNORT_IDS -g snort</span><br></pre></td></tr></table></figure>

<p> 创建Snort目录：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir /etc/snort</span><br><span class="line">sudo mkdir /etc/snort/rules</span><br><span class="line">sudo mkdir /etc/snort/rules/iplists</span><br><span class="line">sudo mkdir /etc/snort/preproc_rules</span><br><span class="line">sudo mkdir /usr/local/lib/snort_dynamicrules</span><br><span class="line">sudo mkdir /etc/snort/so_rules</span><br></pre></td></tr></table></figure>

<p> 创建文件来存储规则：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo touch /etc/snort/rules/iplists/black_list.rules</span><br><span class="line">sudo touch /etc/snort/rules/iplists/white_list.rules</span><br><span class="line">sudo touch /etc/snort/rules/local.rules</span><br></pre></td></tr></table></figure>

<p> 创建日志目录：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir /var/log/snort</span><br><span class="line">sudo mkdir /var/log/snort/archived_logs</span><br></pre></td></tr></table></figure>

<p> 修改文件权限：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo chmod -R 5775 /etc/snort</span><br><span class="line">sudo chmod -R 5775 /var/log/snort</span><br><span class="line">sudo chmod -R 5775 /var/log/snort/archived_logs</span><br><span class="line">sudo chmod -R 5775 /etc/snort/so_rules</span><br><span class="line">sudo chmod -R 5775 /usr/local/lib/snort_dynamicrules</span><br></pre></td></tr></table></figure>

<p> 修改文件的归属用户：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo chown -R snort:snort /etc/snort</span><br><span class="line">sudo chown -R snort:snort /var/log/snort</span><br><span class="line">sudo chown -R snort:snort /usr/local/lib/snort_dynamicrules</span><br></pre></td></tr></table></figure>

<p> 复制配置文件：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cd /opt/snort-2.9.12/etc/</span><br><span class="line">sudo cp *.conf* /etc/snort</span><br><span class="line">sudo cp *.map /etc/snort</span><br><span class="line">sudo cp *.dtd /etc/snort</span><br><span class="line">cd /opt/snort-2.9.12/src/dynamic-preprocessors/build/usr/local/lib/snort_dynamicpreprocessor/</span><br><span class="line">sudo cp * /usr/local/lib/snort_dynamicpreprocessor/</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>修改配置文件</strong></p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/snort/snort.conf</span><br></pre></td></tr></table></figure>

 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ipvar HOME_NET 修改为本机的内部网络</span></span><br><span class="line">ipvar HOME_NET 172.25.45.23/18</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 设置以下配置文件路径</span></span><br><span class="line">var RULE_PATH /etc/snort/rules</span><br><span class="line">SO_RULE_PATH /etc/snort/so_rules</span><br><span class="line">PREPROC_RULE_PATH /etc/snort/preproc_rules</span><br><span class="line">WHITE_LIST_PATH /etc/snort/rules/iplists</span><br><span class="line">BLACK_LIST_PATH /etc/snort/rules/iplists</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 在 output unified2: filename merged.log, <span class="built_in">limit</span> 128, nostamp, mpls_event_types, vlan_event_types 之后添加</span></span><br><span class="line">output unified2: filename snort.u2, limit 128</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 启用 local.rules 文件，其后的 include 文件均注释掉</span></span><br><span class="line">include $RULE_PATH/local.rules</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>添加规则</strong></p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar -xzf community-rules.tar.gz</span><br><span class="line">cp community-rules/* /etc/snort/rules/</span><br></pre></td></tr></table></figure>

<p> 检查规则。</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">snort -T -c /etc/snort/snort.conf</span><br></pre></td></tr></table></figure>

<p> <img data-src="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133016.jpg" alt=""></p>
<p> 在规则中添加一条对 ICMP 包的规则，以便测试。</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/snort/rules/local.rules</span><br></pre></td></tr></table></figure>

 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert icmp any any -&gt; $HOME_NET any (msg:"ICMP Test detected!!!"; classtype:icmp-event; sid:10000001; rev:001; GID:1; )</span><br></pre></td></tr></table></figure>

<p> 设置 sid 对应信息，添加 sid-msg 文件。</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo touch /etc/snort/sid-msg.map</span><br><span class="line">sudo vi /etc/snort/sid-msg.map</span><br></pre></td></tr></table></figure>

 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 || 10000001 || 001 || icmp-event || 0 || ICMP Test detected || url,tools.ietf.org/html/rfc792</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>测试配置文件和功能</strong></p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo snort -T -c /etc/snort/snort.conf -i eth0</span><br><span class="line">sudo snort -A console -q -u snort -g snort -c /etc/snort/snort.conf -i eth0</span><br></pre></td></tr></table></figure>

<p> 关闭防火墙。</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ufw disable</span><br></pre></td></tr></table></figure>

<p> 此时用本机 ping 服务器网口 eth0 的 IP，可以看到服务器上 Snort 在控制台打印出 alert 告警，说明添加的 ICMP 规则已生效。</p>
<p> <img data-src="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133017.jpg" alt=""></p>
</li>
</ol>
<h2 id="安装-Barnyard2"><a href="#安装-Barnyard2" class="headerlink" title="安装 Barnyard2"></a>安装 Barnyard2</h2><ol>
<li><p><strong>安装 Barnyard2，解压编译</strong></p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tar zxvf barnyard2-2-1.13.tar.gz</span><br><span class="line">cd barnyard2-2-1.13</span><br><span class="line">autoreconf -fvi -I ./</span><br><span class="line">./configure --with-mysql --with-mysql-libraries=/usr/lib/x86_64-linux-gnu</span><br><span class="line">sudo make &amp; make install</span><br></pre></td></tr></table></figure>

<p> 这里 make 时发生错误：</p>
<p> <img data-src="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133018.jpg" alt=""></p>
<p> 意思是 spo_alert_fwsam.c 中存在 SOCKET 类型的重复定义。查阅大量资料后得知，这是源码中的 bug，在 GitHub 上已经有人给出了解决办法：将该文件中所有的 <code>SOCKET</code> 替换为 <code>BARNYARD2_SOCKET</code>。具体可参考 <a href="https://github.com/Gerjo/barnyard2/commit/cc53c5573ba016489518bcda69ca64ca7acee2e8#diff-c1f3b2342b04cc7ae2df530b1a871cbeL122" target="_blank">https://github.com/Gerjo/barnyard2/commit/cc53c5573ba016489518bcda69ca64ca7acee2e8#diff-c1f3b2342b04cc7ae2df530b1a871cbeL122</a></p>
<p> 然后重新执行上述指令，编译成功。</p>
</li>
<li><p><strong>测试</strong></p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">barnyard2 -V</span><br></pre></td></tr></table></figure>

<p> <img data-src="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133020.jpg" alt=""></p>
</li>
<li><p><strong>设置配置文件</strong></p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo cp /opt/barnyard2-2-1.13/etc/barnyard2.conf /etc/snort/</span><br><span class="line">sudo mkdir /var/log/barnyard2</span><br><span class="line">sudo chown snort.snort /var/log/barnyard2</span><br><span class="line">sudo touch /var/log/snort/barnyard2.waldo</span><br><span class="line">sudo chown snort.snort /var/log/snort/barnyard2.waldo</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>配置数据库</strong></p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure>

 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create database snort;</span><br><span class="line">mysql&gt; use snort;</span><br><span class="line">mysql&gt; source &#x2F;opt&#x2F;barnyard2-2-1.13&#x2F;schemas&#x2F;create_mysql;</span><br><span class="line">mysql&gt; CREATE USER &#39;snort&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;123456&#39;;</span><br><span class="line">mysql&gt; grant create, insert, select, delete, update on snort.* to &#39;snort&#39;@&#39;localhost&#39;;</span><br><span class="line">mysql&gt; exit;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>添加数据库配置</strong></p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/snort/barnyard2.conf</span><br></pre></td></tr></table></figure>

<p> 在末尾添加数据库配置：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">output database: log, mysql, user=snort password=123456 dbname=snort host=localhost sensor name=sensor01</span><br></pre></td></tr></table></figure>

<p> 修改 barnyard2.conf 的权限，防止被修改。</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chmod 644 /etc/snort/barnyard2.conf</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>测试</strong></p>
<p> 启动 MySQL。</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mysql start</span><br></pre></td></tr></table></figure>

<p> 开启 Snort，并向 eth0 发送 ping 数据包。</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo snort -q -u snort -g snort -c /etc/snort/snort.conf -i eth0</span><br></pre></td></tr></table></figure>

<p> 开启 Barnyard2，将日志信息存入数据库。</p>
<ul>
<li><p><strong>连续处理模式，设置 barnyard2.waldo 为书签</strong></p>
  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo barnyard2 -c /etc/snort/barnyard2.conf -d /var/log/snort -f snort.u2 -w /var/log/snort/barnyard2.waldo -g snort -u snort</span><br></pre></td></tr></table></figure>

<p>  控制台打印出刚才 ping 的记录。</p>
<p>  <img data-src="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133021.jpg" alt=""></p>
<p>  /var/log/snort 目录下也生成了相应的日志文件。</p>
<p>  <img data-src="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133022.jpg" alt=""></p>
</li>
<li><p><strong>文件处理模式，处理单个日志文件</strong></p>
  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo barnyard2 -c /etc/snort/barnyard2.conf -o /var/log/snort/snort.u2.1588583079</span><br></pre></td></tr></table></figure>

<p>  这里选择其中一个日志文件进行处理，同样可以看到刚才的记录。</p>
<p>  <img data-src="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133024.jpg" alt=""></p>
<p>再查看一下数据库条目数量，有所增加。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u snort -p -D snort -e "select count(*) from event"</span><br></pre></td></tr></table></figure>

<p><img data-src="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133025.jpg" alt=""></p>
</li>
</ul>
</li>
</ol>
<h2 id="安装-BASE"><a href="#安装-BASE" class="headerlink" title="安装 BASE"></a>安装 BASE</h2><ol>
<li><p><strong>安装 ADOdb</strong></p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo tar zxvf adodb-5.20.14.tar.gz -C /var/www/html</span><br><span class="line">sudo mv /var/www/html/adodb5 /var/www/html/adodb</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>安装 BASE</strong></p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo tar zxvf base-1.4.5.tar.gz -C /var/www/html</span><br><span class="line">sudo mv /var/www/html/base-1.4.5 /var/www/html/base</span><br><span class="line">sudo /etc/init.d/apache2 restart</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>配置</strong></p>
<p> 修改 /etc/php/5.6/apache2/php.ini 。</p>
 <figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">error_reporting</span> = E_ALL &amp; ~E_NOTICE</span><br></pre></td></tr></table></figure>

<p> 重启 Apache 使配置生效。</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /etc/init.d/apache2 restart</span><br></pre></td></tr></table></figure>

<p> 设置目录权限。</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chown -R root:root /var/www/html</span><br><span class="line">chmod 755 /var/www/html/adodb</span><br></pre></td></tr></table></figure>

<p> 打开 <a href="http://localhost/base/setup/index.php" target="_blank" rel="noopener">http://localhost/base/setup/index.php</a> 。</p>
<p> <img data-src="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133027.jpg" alt=""></p>
<p> 设置页面中，最好每一项都为绿色，表示通过。这里显示 Web 服务器对 BASE 的安装目录不可写。按照提示，可以在设置完成后创建 base_conf.php。</p>
<p> 现在点击 Continue，跟着导引一步步完成设置。</p>
<p> <strong>第 1 步：</strong>选择语言 simplified_chinese ，填写 ADOdb 所在目录 /var/www/html/adodb 。</p>
<p> <strong>第 2 步：</strong>填入数据库的信息，按之前配置的信息填即可（Archive 数据库的信息可以不填）。</p>
<p> <strong>第 3 步：</strong>填入管理账号：snort，密码：123456。</p>
<p> <strong>第 4 步：</strong>创建数据表。</p>
<p> <strong>第 5 步：</strong>提示将显示的信息复制到 /var/www/html/base/base_conf.php 中。</p>
<p> <img data-src="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133030.jpg" alt=""></p>
</li>
</ol>
<pre><code>完成设置后，显示以上页面，代表 BASE 安装成功，可以看到 MySQL 中的数据。</code></pre><h2 id="使用-Snort"><a href="#使用-Snort" class="headerlink" title="使用 Snort"></a>使用 Snort</h2><p>Snort 有三种工作模式：Sniffer、Packet Logger 和 Network Intrusion Detection System 。</p>
<ol>
<li><p><strong>Sniffer 模式只是简单地从网络上抓取数据包并在终端显示出来。</strong></p>
<p> 如果只是想在屏幕上打印出 IP 和 TCP/UDP/ICMP 包的头信息，可以用：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">snort -v</span><br></pre></td></tr></table></figure>

<p> <img data-src="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133032.jpg" alt=""></p>
</li>
<li><p><strong>Packet Logger 模式可把数据包保存在磁盘中。</strong></p>
<p> 如果想把数据包信息存在磁盘上，就要用 Packet Logger Mode 。用以下命令可使 Snort 自动把数据包信息存到磁盘中：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">snort -vde -l log_directory</span><br></pre></td></tr></table></figure>

<p> 当 Snort 运行在该模式下时，它会把所有抓取的数据包按  IP  分类地存放到 log_directory 中。可用 -h 指定本地网络，以使 Snort 记录与本地网络相关的数据包：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">snort -vde -l log_directory -h 192.168.1.0/24</span><br></pre></td></tr></table></figure>

<p> 如果在一个高速网络中，或者想记录数据包以备分析，可以以二进制方式记录数据包，在这里不用指定 -vde，因为二进制方式将记录整个包的信息。如：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">snort -l log_directory -b</span><br></pre></td></tr></table></figure>

<p> 二进制模式把数据包存成 tcpdump 格式，使用如下命令将二进制文件中的信息打印到屏幕上：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">snort -dv -r snort.log</span><br></pre></td></tr></table></figure>

<p> <img data-src="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133033.jpg" alt=""></p>
</li>
<li><p><strong>Network Intrusion Detection 模式最复杂，具有高可配置性。它可使 Snort 根据用户定义的规则分析网络流量，并作出反应。</strong></p>
<p> 用以下命令开启 NIDS 模式：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">snort -dev -l log_directory -h 192.168.1.0/24 -c snort.conf</span><br></pre></td></tr></table></figure>

<p> snort.conf 是规则集配置文件。在 log_directory 目录下会生成 alter 日志，记录入侵检测的警报信息。</p>
<p> 执行命令后，会有一系列的初始化信息。</p>
<p> <img data-src="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133034.jpg" alt=""></p>
<p> 初始化成功。</p>
<p> <img data-src="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133035.jpg" alt=""></p>
<p> 之后也会打印出包信息。</p>
<p> <img data-src="https://ipichub.oss-cn-hangzhou.aliyuncs.com/2020-07-18-133037.jpg" alt=""></p>
</li>
</ol>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" rel="tag"># 计算机网络</a>
              <a href="/tags/Linux/" rel="tag"># Linux</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2019/08/28/%E6%B4%9B%E8%B0%B7-P1219-%E5%85%AB%E7%9A%87%E5%90%8E/" rel="prev" title="洛谷 P1219 八皇后">
      <i class="fa fa-chevron-left"></i> 洛谷 P1219 八皇后
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/05/15/%E9%AB%98%E9%80%9A%E6%BB%A4%E6%B3%A2%E6%B3%95%E3%80%81%E5%BE%AE%E5%88%86%E7%AE%97%E5%AD%90%E6%B3%95%E3%80%81%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%9B%BE%E5%83%8F%E8%BE%B9%E7%BC%98%E6%A3%80%E6%B5%8B/" rel="next" title="高通滤波法、微分算子法、神经网络方法实现图像边缘检测">
      高通滤波法、微分算子法、神经网络方法实现图像边缘检测 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="gitalk-container"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#配置实验环境"><span class="nav-number">1.</span> <span class="nav-text">配置实验环境</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改-Ubuntu-源"><span class="nav-number">2.</span> <span class="nav-text">修改 Ubuntu 源</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安装-Lamp"><span class="nav-number">3.</span> <span class="nav-text">安装 Lamp</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安装-Snort"><span class="nav-number">4.</span> <span class="nav-text">安装 Snort</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安装-Barnyard2"><span class="nav-number">5.</span> <span class="nav-text">安装 Barnyard2</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安装-BASE"><span class="nav-number">6.</span> <span class="nav-text">安装 BASE</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用-Snort"><span class="nav-number">7.</span> <span class="nav-text">使用 Snort</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="禹衡"
      src="/images/avatar.jpeg">
  <p class="site-author-name" itemprop="name">禹衡</p>
  <div class="site-description" itemprop="description">此生将无法被定义</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">29</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">40</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">禹衡</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">98k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">1:29</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

  

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">

<script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID    : '8cc7c10d257e7c09cd3c',
      clientSecret: '1ba6a901214a6d75fd0d259addb8cd9fd30eb43d',
      repo        : 'timdyh.github.io',
      owner       : 'TimDyh',
      admin       : ['TimDyh'],
      id          : 'b422f3857e3084f24aef16d501eea69f',
        language: 'zh-CN',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script>

</body>
</html>
